<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>GeoAR.js demo</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
</head>

<body style='margin: 0; overflow: hidden;'>
    <div id="info-text" style="
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.7);
        color: #fff;
        padding: 10px 20px;
        border-radius: 8px;
        font-family: Arial, sans-serif;
        z-index: 10;
        pointer-events: none;
    ">
        Welcome to GeoAR! Your model will appear at your location.
    </div>
    <a-scene
        vr-mode-ui="enabled: false"
        embedded
        arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
        <a-entity id="model"
            gltf-model="./assets/magnemite/scene.gltf"
            rotation="0 180 0"
            scale="0.15 0.15 0.15"
            animation-mixer>
        </a-entity>
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>
    <script>
        // Wait for the scene to load
        window.onload = function() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const model = document.getElementById('model');
                    model.setAttribute('gps-entity-place', `longitude: ${longitude}; latitude: ${latitude};`);
                    const info = document.getElementById('info-text');
                    info.innerHTML += `Model placed at your location!<br>Latitude: ${latitude}<br>Longitude: ${longitude}`;
                }, function(error) {
                    console.error('Error getting location', error);
                });
            } else {
                alert("Geolocation is not supported by your browser.");
            }
        }
    </script>
</body>